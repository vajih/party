<div class="admin-layout">
  <!-- Sidebar -->
  <aside class="admin-sidebar">
    <div class="brand">
      <i class="fas fa-party-horn"></i>
      Party Dashboard
    </div>
    
    <nav>
      <div class="nav-section">
        <h3>General</h3>
        <a href="#overview" class="nav-item active">
          <i class="fas fa-home"></i>
          Overview
        </a>
        <a href="#parties" class="nav-item">
          <i class="fas fa-calendar"></i>
          Parties
        </a>
      </div>
      
      <div class="nav-section">
        <h3>Games & Activities</h3>
        <a href="#games" class="nav-item">
          <i class="fas fa-gamepad"></i>
          Games
        </a>
        <a href="#aboutyou-report" class="nav-item">
          <i class="fas fa-chart-bar"></i>
          About You Report
        </a>
        <a href="#playlists" class="nav-item">
          <i class="fas fa-music"></i>
          Playlists
        </a>
      </div>

      <div class="nav-section">
        <h3>Management</h3>
        <a href="#cohosts" class="nav-item">
          <i class="fas fa-users"></i>
          Co-Hosts
        </a>
        <a href="#moderation" class="nav-item">
          <i class="fas fa-shield"></i>
          Moderation
        </a>
      </div>
    </nav>
  </aside>

  <!-- Header -->
  <header class="admin-header">
    <div class="actions">
      <button id="headerCreatePartyBtn" class="primary">
        <i class="fas fa-plus"></i>
        New Party
      </button>
      <div id="roleBadge" class="mode-badge" data-role="host">Host</div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="admin-main">
    <!-- Overview Section -->
    <section id="overview" class="section">
      <div class="section-header">
        <h2>Dashboard Overview</h2>
        <div class="actions">
          <button id="overviewCreatePartyBtn" class="primary">
            <i class="fas fa-plus"></i>
            New Party
          </button>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <h3>Total Parties</h3>
          <div class="value" id="totalParties">-</div>
          <div class="change positive">
            <i class="fas fa-arrow-up"></i>
            2 this month
          </div>
        </div>
        <div class="stat-card">
          <h3>Active Games</h3>
          <div class="value" id="activeGames">-</div>
          <div class="change positive">
            <i class="fas fa-arrow-up"></i>
            5 new today
          </div>
        </div>
        <div class="stat-card">
          <h3>Total Guests</h3>
          <div class="value" id="totalGuests">-</div>
          <div class="change positive">
            <i class="fas fa-arrow-up"></i>
            12 this week
          </div>
        </div>
        <div class="stat-card">
          <h3>Pending Mods</h3>
          <div class="value" id="pendingMods">-</div>
          <div class="change negative">
            <i class="fas fa-arrow-up"></i>
            3 need review
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="section-header">
        <h2>Quick Actions</h2>
      </div>
      
      <div class="action-grid">
        <div class="action-card" id="newGameBtn">
          <i class="fas fa-gamepad fa-lg"></i>
          <h3>Add New Game</h3>
          <p>Create a new game for your party</p>
        </div>
        <div class="action-card" id="inviteCohostBtn">
          <i class="fas fa-user-plus fa-lg"></i>
          <h3>Invite Co-host</h3>
          <p>Add someone to help manage the party</p>
        </div>
        <div class="action-card" id="checkModQueueBtn">
          <i class="fas fa-shield fa-lg"></i>
          <h3>Check Mod Queue</h3>
          <p>Review pending submissions</p>
        </div>
        <div class="action-card" id="createPlaylistBtn">
          <i class="fas fa-music fa-lg"></i>
          <h3>Create Playlist</h3>
          <p>Start a new music playlist</p>
        </div>
      </div>
    </section>

    <!-- Parties Section -->
    <section id="parties" class="section" hidden>
      <div class="section-header">
        <h2>Manage Parties</h2>
        <div class="actions">
          <button id="scrollToCreateFormBtn" class="primary">
            <i class="fas fa-plus"></i>
            Create Party
          </button>
        </div>
      </div>

      <div class="card" id="createPartyCard">
        <h3>Create a new party</h3>
        <form id="createPartyForm" class="stack">
          <div class="row"><label>Title</label><input id="partyTitle" required placeholder="FriendsGiving 2025" /></div>
          <div class="row"><label>Date & Time</label><input id="partyDate" type="datetime-local" /></div>
          <div class="row"><label>Venue</label><input id="partyVenue" placeholder="Optional" /></div>
          <div class="row"><label>Description</label><textarea id="partyDesc" rows="2"></textarea></div>
          <div class="row"><label>Expected guests</label><input id="partyExpected" type="number" min="0" placeholder="e.g. 30" /></div>
          <div class="row"><label>Custom slug</label><input id="partySlug" placeholder="friendsgiving-2025 (optional)" /></div>
          <button type="submit">Create Party</button>
        </form>
      </div>

      <div class="card">
        <h3>Your parties</h3>
        <div class="row">
            <label>For game actions</label>
            <select id="hostPartySelectList"></select>
        </div>
        <div id="hostPartiesList" class="list" style="margin-top:8px;"></div>
        <div id="partyEditForm" class="card" style="margin-top:12px;" hidden>
          <h4>Edit Party</h4>
          <form id="editPartyForm" class="stack">
            <div class="row"><label>Title</label><input id="editPartyTitle" name="title" required /></div>
            <div class="row"><label>Date & Time</label><input id="editPartyDate" name="date" type="datetime-local" /></div>
            <div class="row"><label>Venue</label><input id="editPartyVenue" name="venue" placeholder="Optional" /></div>
            <div class="row"><label>Description</label><textarea id="editPartyDesc" name="description" rows="2"></textarea></div>
            <div class="row"><label>Expected guests</label><input id="editPartyExpected" name="expected_guests" type="number" min="0" /></div>
            <div class="row">
              <button type="submit">Save Changes</button>
              <button type="button" class="link" id="cancelEditParty">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Games Section -->
    <section id="games" class="section" hidden>
      <div class="section-header">
        <h2>Games</h2>
        <div class="actions">
          <button id="newGameToggle" class="primary">Add Game</button>
        </div>
      </div>

      <div id="newGameCard" class="card">
        <h3>Add a game</h3>
        <form id="newGameForm" class="stack">
          <div class="row"><label>Party</label><select id="gamePartySelect"></select></div>
          <div class="row">
            <label>Game Type</label>
            <select id="gameType">
              <option value="two_facts">Custom Prompts</option>
                <option value="about_you">About You (Profile Questions)</option>
              <option value="favorite_song">Favorite Song</option>
              <option value="baby_photo">Baby Photo</option>
              <option value="teen_photo">Teen Photo</option>
              <option value="wedding_photo">Wedding Photo</option>
            </select>
          </div>
            <div id="aboutQuestionsWrap" class="card" style="margin-top:12px; display:none;">
              <h4>About You â€” Questions</h4>
              <p class="small muted">Enter one question per line. For dropdown options, use format: <code>Question [Option1, Option2, Option3]</code></p>
              <textarea id="aboutQuestions" rows="5" placeholder="What's your favorite memory?&#10;Morning/Night [Morning Lark, Night Owl]&#10;What's your dream vacation?"></textarea>
              </div>
              <div id="aboutPreview" class="card" style="margin-top:12px; display:none;">
                <h4>Preview</h4>
                <div id="aboutPreviewInner" class="card" style="padding:12px;background:#fff;color:var(--fg);"></div>
              </div>
          <div class="row"><label>Title</label><input id="gameTitle" placeholder="Optional (auto if empty)"/></div>
          <button type="submit">Add Game</button>
        </form>
      </div>

      <div class="card">
        <h3>Your games</h3>
        <div id="hostGamesList" class="list" style="margin-top:8px;"></div>
      </div>
    </section>

    <!-- Co-Hosts Section -->
    <section id="cohosts" class="section" hidden>
      <div class="section-header">
        <h2>Co-Host Management</h2>
      </div>

      <div class="card">
        <div class="row">
          <label>Select Party</label>
          <select id="cohostPartySelect"></select>
        </div>
        <div id="cohostSection" style="margin-top:12px;" hidden>
          <form id="addCohostForm" class="stack">
            <div class="row">
              <label>Email</label>
              <input type="email" id="cohostEmail" required placeholder="co-host@example.com" />
            </div>
            <div class="row">
              <label>Role</label>
              <select id="cohostRole">
                <option value="cohost">Co-Host (Full access)</option>
                <option value="moderator">Moderator (Games only)</option>
              </select>
            </div>
            <button type="submit">Add Co-Host</button>
          </form>
          <div id="cohostList" class="list" style="margin-top:12px;"></div>
        </div>
      </div>
    </section>

    <!-- Playlists Section -->
    <section id="playlists" class="section" hidden>
      <div class="section-header">
        <h2>Playlists</h2>
      </div>
      <div class="card">
        <p class="small muted">Playlist management coming soon. In the meantime, use the Favorite Song game to collect music from your guests.</p>
      </div>
    </section>

    <!-- About You Report Section -->
    <section id="aboutyou-report" class="section" hidden>
      <div class="section-header">
        <h2>About You Report</h2>
        <div class="actions">
          <select id="reportPartySelect"></select>
          <button id="exportReportBtn" class="secondary">
            <i class="fas fa-download"></i>
            Export CSV
          </button>
          <button id="refreshReportBtn" class="link">Refresh</button>
        </div>
      </div>

      <!-- Summary Stats -->
      <div class="stats-grid" style="margin-bottom: 24px;">
        <div class="stat-card">
          <h3>Total Profiles</h3>
          <div class="value" id="reportTotalProfiles">-</div>
        </div>
        <div class="stat-card">
          <h3>Completed (100%)</h3>
          <div class="value" id="reportCompleted">-</div>
        </div>
        <div class="stat-card">
          <h3>In Progress</h3>
          <div class="value" id="reportInProgress">-</div>
        </div>
        <div class="stat-card">
          <h3>Avg Completion</h3>
          <div class="value" id="reportAvgCompletion">-</div>
        </div>
      </div>

      <!-- Filter/View Options -->
      <div class="card" style="margin-bottom: 16px;">
        <div class="row" style="display: flex; gap: 16px; align-items: center;">
          <label>View:</label>
          <select id="reportViewMode" style="flex: 1; max-width: 200px;">
            <option value="summary">Summary View</option>
            <option value="detailed">Detailed Answers</option>
            <option value="aggregate">Aggregate Results</option>
          </select>
          
          <label>Filter:</label>
          <select id="reportFilterCompletion" style="flex: 1; max-width: 200px;">
            <option value="all">All Guests</option>
            <option value="complete">100% Complete</option>
            <option value="incomplete">Incomplete</option>
          </select>
        </div>
      </div>

      <!-- Report Content -->
      <div id="reportContent" class="card">
        <p class="small muted">Select a party to view the About You report.</p>
      </div>
    </section>

    <!-- Moderation Section -->
    <section id="moderation" class="section" hidden>
      <div class="section-header">
        <h2>Moderation queue</h2>
        <div class="actions"><button id="refreshMod" class="link">Refresh</button></div>
      </div>
      <div class="card">
        <div id="modList" class="list" style="margin-top:8px;"></div>
      </div>
    </section>

  </main>

