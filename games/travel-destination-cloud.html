<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Travel Destination Cloud ‚Äî Party Game</title>
  <style>
    :root{
      --bg:#0c0c0f;
      --fg:#f4f4f7;
      --muted:#9aa0a6;
      --accent:#ffd166;
      --accent2:#06d6a0;
      --danger:#ef476f;
      --shadow: rgba(0,0,0,.35);
      /* Dilwale brand colors */
      --brand-red:#dc2626;
      --brand-gold:#fbbf24;
      --brand-orange:#f97316;
      /* Region colors for word cloud */
      --asia-color:#f472b6;
      --europe-color:#60a5fa;
      --americas-color:#34d399;
      --africa-color:#fbbf24;
      --oceania-color:#a78bfa;
      --middle-east-color:#fb923c;
    }
    html,body{
      height:100%;
      margin:0;
      background: var(--bg);
      color: var(--fg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .wrap{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:20px;
      padding:20px;
    }
    .controls{
      width:100%; max-width:1200px;
      display:flex; align-items:center; justify-content:center;
      gap:12px; flex-wrap:wrap;
    }
    button{
      background:#17171c; color:var(--fg); border:1px solid #2a2a31;
      padding:12px 20px; border-radius:10px; cursor:pointer; font-weight:600;
      box-shadow: 0 6px 20px var(--shadow);
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    button:hover{ transform: translateY(-1px); border-color:#3a3a44; }
    button:active{ transform: translateY(0); }
    button.active{
      background: linear-gradient(135deg, var(--brand-red), var(--brand-orange));
      border-color: var(--brand-gold);
    }
    .stage{
      position:relative; width:100%; max-width:1200px; height:80vh;
      flex:1 1 auto; display:flex; align-items:center; justify-content:center;
      background: radial-gradient(1200px 600px at 50% 30%, #16161b, #0e0e12 70%, #0b0b0e 90%);
      border:4px solid transparent;
      border-image: linear-gradient(135deg, var(--brand-red), var(--brand-orange), var(--brand-gold)) 1;
      border-radius:20px;
      overflow:hidden;
      box-shadow: 
        0 24px 60px var(--shadow),
        0 0 0 1px rgba(220, 38, 38, 0.3),
        inset 0 0 40px rgba(220, 38, 38, 0.05);
    }
    .logo-frame{
      position:absolute;
      bottom:12px;
      left:12px;
      z-index:10;
      opacity:0.4;
      transition: opacity 0.3s ease;
    }
    .logo-frame:hover{
      opacity:0.7;
    }
    .logo-frame img{
      height:32px;
      width:auto;
      display:block;
      filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.5));
    }
    .cloud-container{
      width:100%; height:100%;
      display:flex; align-items:center; justify-content:center;
      padding:40px;
      position:relative;
    }
    .word-cloud{
      width:100%; height:100%;
      display:flex; flex-wrap:wrap; align-items:center; justify-content:center;
      gap:20px;
      position:relative;
    }
    .destination-word{
      display:inline-block;
      padding:8px 16px;
      margin:4px;
      cursor:pointer;
      transition: transform 0.3s ease, opacity 0.3s ease;
      font-weight:700;
      text-shadow: 0 2px 8px rgba(0,0,0,0.6);
      border-radius:8px;
      background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      backdrop-filter: blur(4px);
    }
    .destination-word:hover{
      transform: scale(1.15);
      background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }
    .destination-word.hidden{
      opacity:0.2;
      transform: scale(0.9);
    }
    .stats-overlay{
      position:absolute;
      top:20px;
      right:20px;
      background: linear-gradient(135deg, rgba(0,0,0,.85), rgba(0,0,0,.7));
      backdrop-filter: blur(10px);
      padding:16px 24px;
      border-radius:12px;
      border:2px solid rgba(220, 38, 38, 0.4);
      box-shadow: 0 8px 24px rgba(0,0,0,.6);
      text-align:right;
    }
    .stats-overlay h3{
      margin:0 0 8px 0;
      font-size:1rem;
      color:var(--muted);
      font-weight:600;
    }
    .stats-overlay .big-number{
      font-size:2.5rem;
      font-weight:900;
      background: linear-gradient(135deg, var(--brand-red), var(--brand-orange), var(--brand-gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin:0;
    }
    .loading-overlay{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
      background: rgba(12,12,15,0.95); z-index:100; flex-direction:column; gap:16px;
    }
    .spinner{
      width:40px; height:40px; border:3px solid #2a2a31;
      border-top-color:var(--brand-red); border-radius:50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    .legend{
      display:flex; gap:20px; align-items:center; justify-content:center;
      font-size:0.9rem;
      flex-wrap:wrap;
    }
    .legend-item{
      display:flex; align-items:center; gap:8px;
    }
    .legend-dot{
      width:12px; height:12px; border-radius:50%;
    }
    .tooltip{
      position:fixed;
      background: rgba(0,0,0,0.9);
      color:var(--fg);
      padding:8px 12px;
      border-radius:6px;
      font-size:0.85rem;
      pointer-events:none;
      z-index:1000;
      opacity:0;
      transition:opacity 0.2s ease;
      border:1px solid rgba(255,255,255,0.2);
      max-width:300px;
    }
    .tooltip.show{ opacity:1; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="controls">
      <button id="allBtn" class="active">All Destinations</button>
      <button id="asiaBtn">Asia</button>
      <button id="europeBtn">Europe</button>
      <button id="americasBtn">Americas</button>
      <button id="middleEastBtn">Middle East</button>
      <button id="africaBtn">Africa</button>
      <button id="oceaniaBtn">Oceania</button>
      <button id="refreshBtn">üîÑ Refresh</button>
    </div>

    <div class="stage" id="stage">
      <div class="logo-frame">
        <img src="../assets/img/dilwale_logo.png" alt="Dilwale Logo" />
      </div>
      
      <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div style="color:var(--muted); font-weight:600;">Loading travel destinations...</div>
      </div>

      <div class="stats-overlay">
        <h3>Unique Destinations</h3>
        <p class="big-number" id="destinationCount">0</p>
      </div>

      <div class="cloud-container">
        <div class="word-cloud" id="wordCloud"></div>
      </div>
    </div>

    <div class="legend">
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--asia-color);"></div>
        <span>Asia</span>
      </div>
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--europe-color);"></div>
        <span>Europe</span>
      </div>
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--americas-color);"></div>
        <span>Americas</span>
      </div>
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--middle-east-color);"></div>
        <span>Middle East</span>
      </div>
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--africa-color);"></div>
        <span>Africa</span>
      </div>
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--oceania-color);"></div>
        <span>Oceania</span>
      </div>
    </div>
  </div>

  <div id="tooltip" class="tooltip"></div>

  <!-- Supabase JS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../config/env.local.js"></script>

  <script>
    // ======== VERIFY CONFIG LOADED ========
    if (typeof CONFIG === 'undefined') {
      console.error('‚ùå CONFIG not loaded! Check if config/env.local.js exists');
      document.getElementById('loadingOverlay').innerHTML = `
        <div style="color:var(--danger); font-weight:600;">Configuration Error</div>
        <div style="color:var(--muted); font-size:0.9rem;">config/env.local.js not found</div>
      `;
      throw new Error('CONFIG is undefined');
    }
    
    console.log('‚úÖ Config loaded');
    
    // ======== SUPABASE SETUP ========
    const { createClient } = supabase;
    const supabaseClient = createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY);
    console.log('‚úÖ Supabase client initialized');
    
    // ======== DATA STRUCTURES ========
    let destinationData = [];
    let currentFilter = 'all';
    
    // Destination normalization map
    const destinationNormalization = {
      // Pakistan cities
      'karachi': 'Karachi',
      'lahore': 'Lahore',
      'islamabad': 'Islamabad',
      
      // Major world cities
      'nyc': 'New York City',
      'new york': 'New York City',
      'ny': 'New York City',
      'la': 'Los Angeles',
      'sf': 'San Francisco',
      'san fran': 'San Francisco',
      'dc': 'Washington DC',
      'washington': 'Washington DC',
      
      // Asian cities
      'tokyo': 'Tokyo',
      'kyoto': 'Kyoto',
      'dubai': 'Dubai',
      'istanbul': 'Istanbul',
      'bangkok': 'Bangkok',
      'singapore': 'Singapore',
      'mumbai': 'Mumbai',
      'delhi': 'Delhi',
      'new delhi': 'New Delhi',
      'beijing': 'Beijing',
      'shanghai': 'Shanghai',
      'hong kong': 'Hong Kong',
      'seoul': 'Seoul',
      
      // European cities
      'paris': 'Paris',
      'london': 'London',
      'rome': 'Rome',
      'barcelona': 'Barcelona',
      'amsterdam': 'Amsterdam',
      'venice': 'Venice',
      'florence': 'Florence',
      'santorini': 'Santorini',
      'athens': 'Athens',
      'prague': 'Prague',
      'vienna': 'Vienna',
      'budapest': 'Budapest',
      
      // Middle East
      'mecca': 'Mecca',
      'makkah': 'Mecca',
      'medina': 'Medina',
      'madinah': 'Medina',
      'jerusalem': 'Jerusalem',
      'cairo': 'Cairo',
      
      // Africa
      'marrakech': 'Marrakech',
      'marrakesh': 'Marrakech',
      'cape town': 'Cape Town',
      
      // Oceania
      'sydney': 'Sydney',
      'melbourne': 'Melbourne',
      'auckland': 'Auckland',
      'bali': 'Bali',
      'fiji': 'Fiji',
      
      // Americas
      'cancun': 'Canc√∫n',
      'mexico city': 'Mexico City',
      'toronto': 'Toronto',
      'vancouver': 'Vancouver',
      'rio': 'Rio de Janeiro',
      'rio de janeiro': 'Rio de Janeiro',
      'buenos aires': 'Buenos Aires',
    };
    
    // Region mapping for destinations
    const destinationRegion = {
      // Asia
      'tokyo': 'asia', 'kyoto': 'asia', 'osaka': 'asia', 'bangkok': 'asia',
      'singapore': 'asia', 'hong kong': 'asia', 'seoul': 'asia', 'beijing': 'asia',
      'shanghai': 'asia', 'mumbai': 'asia', 'delhi': 'asia', 'new delhi': 'asia',
      'bangalore': 'asia', 'kuala lumpur': 'asia', 'hanoi': 'asia', 'phuket': 'asia',
      'bali': 'asia', 'maldives': 'asia', 'sri lanka': 'asia', 'nepal': 'asia',
      'bhutan': 'asia', 'karachi': 'asia', 'lahore': 'asia', 'islamabad': 'asia',
      
      // Europe
      'paris': 'europe', 'london': 'europe', 'rome': 'europe', 'barcelona': 'europe',
      'amsterdam': 'europe', 'venice': 'europe', 'florence': 'europe', 'santorini': 'europe',
      'athens': 'europe', 'prague': 'europe', 'vienna': 'europe', 'budapest': 'europe',
      'berlin': 'europe', 'munich': 'europe', 'zurich': 'europe', 'geneva': 'europe',
      'copenhagen': 'europe', 'stockholm': 'europe', 'oslo': 'europe', 'reykjavik': 'europe',
      'lisbon': 'europe', 'madrid': 'europe', 'seville': 'europe', 'dubrovnik': 'europe',
      'iceland': 'europe', 'switzerland': 'europe', 'italy': 'europe', 'france': 'europe',
      'spain': 'europe', 'greece': 'europe', 'croatia': 'europe',
      
      // Americas
      'new york city': 'americas', 'los angeles': 'americas', 'san francisco': 'americas',
      'chicago': 'americas', 'miami': 'americas', 'las vegas': 'americas', 'seattle': 'americas',
      'boston': 'americas', 'washington dc': 'americas', 'toronto': 'americas', 'vancouver': 'americas',
      'canc√∫n': 'americas', 'mexico city': 'americas', 'rio de janeiro': 'americas',
      'buenos aires': 'americas', 'lima': 'americas', 'bogota': 'americas', 'havana': 'americas',
      
      // Middle East
      'dubai': 'middle_east', 'abu dhabi': 'middle_east', 'doha': 'middle_east',
      'istanbul': 'middle_east', 'jerusalem': 'middle_east', 'tel aviv': 'middle_east',
      'beirut': 'middle_east', 'amman': 'middle_east', 'mecca': 'middle_east',
      'medina': 'middle_east', 'riyadh': 'middle_east', 'jeddah': 'middle_east',
      'muscat': 'middle_east', 'cairo': 'middle_east',
      
      // Africa
      'marrakech': 'africa', 'cape town': 'africa', 'johannesburg': 'africa',
      'nairobi': 'africa', 'zanzibar': 'africa', 'casablanca': 'africa',
      'tunis': 'africa', 'algiers': 'africa', 'lagos': 'africa', 'accra': 'africa',
      'morocco': 'africa', 'egypt': 'africa', 'south africa': 'africa', 'kenya': 'africa',
      
      // Oceania
      'sydney': 'oceania', 'melbourne': 'oceania', 'auckland': 'oceania',
      'queenstown': 'oceania', 'fiji': 'oceania', 'bora bora': 'oceania',
      'tahiti': 'oceania', 'perth': 'oceania', 'brisbane': 'oceania',
      'australia': 'oceania', 'new zealand': 'oceania',
    };
    
    // ======== LOAD DATA FROM SUPABASE ========
    async function loadDestinationData() {
      try {
        const PARTY_SLUG = 'friendsgiving2025-1ty7';
        
        console.log('üîç Loading travel destination data...');
        
        // Get party ID
        const { data: party, error: partyError } = await supabaseClient
          .from('parties')
          .select('id')
          .eq('slug', PARTY_SLUG)
          .single();
        
        if (partyError) throw partyError;
        console.log('‚úÖ Party found:', party.id);
        
        // Get all profiles with extended_answers
        const { data: profiles, error: profileError } = await supabaseClient
          .from('party_profiles')
          .select('user_id, display_name, extended_answers')
          .eq('party_id', party.id);
        
        if (profileError) throw profileError;
        console.log(`‚úÖ Found ${profiles.length} profiles`);
        
        // Extract and count destinations with normalization
        const destinationCount = {};
        
        profiles.forEach(profile => {
          let destination = profile.extended_answers?.fav_city_travel;
          
          // Check if this is a write-in custom entry (format: X:other:Custom Name)
          if (destination && destination.startsWith('X:')) {
            const parts = destination.split(':');
            if (parts.length >= 3) {
              // Extract the custom destination name after "X:other:"
              destination = parts.slice(2).join(':').trim();
              console.log(`üìù Found custom destination: "${destination}"`);
            }
          }
          
          if (destination && destination.trim() && destination.toLowerCase() !== 'not shared') {
            // Apply smart normalization
            const normalizedDestination = normalizeDestinationName(destination);
            
            if (!destinationCount[normalizedDestination]) {
              destinationCount[normalizedDestination] = {
                name: normalizedDestination,
                count: 0,
                region: detectRegion(normalizedDestination),
                guests: [],
                originalInputs: [] // Track what people actually typed
              };
            }
            destinationCount[normalizedDestination].count++;
            destinationCount[normalizedDestination].guests.push(profile.display_name);
            destinationCount[normalizedDestination].originalInputs.push(destination.trim());
          }
        });
        
        // Convert to array and sort by count
        destinationData = Object.values(destinationCount).sort((a, b) => b.count - a.count);
        
        console.log(`‚úÖ Found ${destinationData.length} unique destinations`);
        console.log('Top destinations:', destinationData.slice(0, 5));
        
        document.getElementById('loadingOverlay').style.display = 'none';
        document.getElementById('destinationCount').textContent = destinationData.length;
        
        renderWordCloud();
        
      } catch (error) {
        console.error('Error loading destination data:', error);
        document.getElementById('loadingOverlay').innerHTML = `
          <div style="color:var(--danger); font-weight:600;">Failed to load data</div>
          <div style="color:var(--muted); font-size:0.9rem;">Check console for details</div>
        `;
      }
    }
    
    // ======== NORMALIZE DESTINATION NAME ========
    function normalizeDestinationName(rawName) {
      if (!rawName) return '';
      
      // Step 1: Basic cleanup
      let cleaned = rawName.trim();
      
      // Step 2: Remove common filler words and punctuation
      cleaned = cleaned
        .replace(/[!?.,;:]/g, '') // Remove punctuation
        .replace(/\s+/g, ' ') // Normalize whitespace
        .trim();
      
      // Step 3: Check against normalization map (case-insensitive)
      const lowerCleaned = cleaned.toLowerCase();
      if (destinationNormalization[lowerCleaned]) {
        console.log(`üîÑ Normalized "${rawName}" ‚Üí "${destinationNormalization[lowerCleaned]}"`);
        return destinationNormalization[lowerCleaned];
      }
      
      // Step 4: Title case for consistent formatting
      const titleCased = cleaned
        .split(' ')
        .map(word => {
          // Keep all caps words (like "NYC", "LA") as-is
          if (word === word.toUpperCase() && word.length <= 3) {
            return word;
          }
          // Title case regular words
          return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
        })
        .join(' ');
      
      // Step 5: Check if title-cased version matches normalization map
      const lowerTitled = titleCased.toLowerCase();
      if (destinationNormalization[lowerTitled]) {
        console.log(`üîÑ Normalized "${rawName}" ‚Üí "${destinationNormalization[lowerTitled]}"`);
        return destinationNormalization[lowerTitled];
      }
      
      console.log(`‚ú® Using cleaned name: "${rawName}" ‚Üí "${titleCased}"`);
      return titleCased;
    }
    
    // ======== DETECT REGION FROM DESTINATION ========
    function detectRegion(destinationName) {
      const normalized = destinationName.toLowerCase().trim();
      
      // Check exact matches first
      if (destinationRegion[normalized]) {
        return destinationRegion[normalized];
      }
      
      // Check partial matches
      for (const [destination, region] of Object.entries(destinationRegion)) {
        if (normalized.includes(destination) || destination.includes(normalized)) {
          return region;
        }
      }
      
      return 'unknown';
    }
    
    // ======== GET COLOR BY REGION ========
    function getRegionColor(region) {
      const colorMap = {
        'asia': 'var(--asia-color)',
        'europe': 'var(--europe-color)',
        'americas': 'var(--americas-color)',
        'middle_east': 'var(--middle-east-color)',
        'africa': 'var(--africa-color)',
        'oceania': 'var(--oceania-color)',
        'unknown': 'var(--muted)'
      };
      return colorMap[region] || colorMap['unknown'];
    }
    
    // ======== RENDER WORD CLOUD ========
    function renderWordCloud() {
      const container = document.getElementById('wordCloud');
      container.innerHTML = '';
      
      // Filter data based on current filter
      const filteredData = destinationData.filter(destination => {
        if (currentFilter === 'all') return true;
        return destination.region === currentFilter;
      });
      
      if (filteredData.length === 0) {
        container.innerHTML = '<div style="color:var(--muted); font-size:1.5rem;">No destinations found for this filter</div>';
        return;
      }
      
      // Calculate font sizes (min 1rem, max 5rem based on count)
      const maxCount = Math.max(...filteredData.map(d => d.count));
      const minCount = Math.min(...filteredData.map(d => d.count));
      
      filteredData.forEach(destination => {
        const word = document.createElement('div');
        word.className = 'destination-word';
        word.textContent = destination.name;
        
        // Calculate font size (logarithmic scale for better distribution)
        const ratio = maxCount === minCount ? 1 : (Math.log(destination.count) - Math.log(minCount)) / (Math.log(maxCount) - Math.log(minCount));
        const fontSize = 1 + (ratio * 4); // 1rem to 5rem
        word.style.fontSize = `${fontSize}rem`;
        
        // Apply color based on region
        word.style.color = getRegionColor(destination.region);
        
        // Add hover tooltip
        word.addEventListener('mouseenter', (e) => showTooltip(e, destination));
        word.addEventListener('mouseleave', hideTooltip);
        word.addEventListener('mousemove', moveTooltip);
        
        container.appendChild(word);
      });
      
      // Shuffle positions for more organic look
      const words = Array.from(container.children);
      words.sort(() => Math.random() - 0.5);
      words.forEach(word => container.appendChild(word));
    }
    
    // ======== TOOLTIP FUNCTIONS ========
    const tooltip = document.getElementById('tooltip');
    
    function showTooltip(e, destination) {
      const guestList = destination.guests.join(', ');
      
      // Show original inputs if there were variations normalized
      const uniqueInputs = [...new Set(destination.originalInputs)];
      const variationsText = uniqueInputs.length > 1 
        ? `<br><small style="color:var(--muted); font-style:italic;">Variations: ${uniqueInputs.join(', ')}</small>`
        : '';
      
      const regionName = {
        'asia': 'Asia',
        'europe': 'Europe',
        'americas': 'Americas',
        'middle_east': 'Middle East',
        'africa': 'Africa',
        'oceania': 'Oceania',
        'unknown': 'Unknown Region'
      }[destination.region] || 'Unknown';
      
      tooltip.innerHTML = `
        <strong>${destination.name}</strong> <span style="color:${getRegionColor(destination.region)};">‚óè ${regionName}</span><br>
        ${destination.count} ${destination.count === 1 ? 'person' : 'people'}<br>
        <small style="color:var(--muted);">${guestList}</small>
        ${variationsText}
      `;
      tooltip.classList.add('show');
      moveTooltip(e);
    }
    
    function hideTooltip() {
      tooltip.classList.remove('show');
    }
    
    function moveTooltip(e) {
      tooltip.style.left = (e.clientX + 15) + 'px';
      tooltip.style.top = (e.clientY + 15) + 'px';
    }
    
    // ======== FILTER CONTROLS ========
    document.getElementById('allBtn').addEventListener('click', () => {
      currentFilter = 'all';
      updateActiveButton('allBtn');
      renderWordCloud();
    });
    
    document.getElementById('asiaBtn').addEventListener('click', () => {
      currentFilter = 'asia';
      updateActiveButton('asiaBtn');
      renderWordCloud();
    });
    
    document.getElementById('europeBtn').addEventListener('click', () => {
      currentFilter = 'europe';
      updateActiveButton('europeBtn');
      renderWordCloud();
    });
    
    document.getElementById('americasBtn').addEventListener('click', () => {
      currentFilter = 'americas';
      updateActiveButton('americasBtn');
      renderWordCloud();
    });
    
    document.getElementById('middleEastBtn').addEventListener('click', () => {
      currentFilter = 'middle_east';
      updateActiveButton('middleEastBtn');
      renderWordCloud();
    });
    
    document.getElementById('africaBtn').addEventListener('click', () => {
      currentFilter = 'africa';
      updateActiveButton('africaBtn');
      renderWordCloud();
    });
    
    document.getElementById('oceaniaBtn').addEventListener('click', () => {
      currentFilter = 'oceania';
      updateActiveButton('oceaniaBtn');
      renderWordCloud();
    });
    
    document.getElementById('refreshBtn').addEventListener('click', () => {
      document.getElementById('loadingOverlay').style.display = 'flex';
      loadDestinationData();
    });
    
    function updateActiveButton(activeId) {
      ['allBtn', 'asiaBtn', 'europeBtn', 'americasBtn', 'middleEastBtn', 'africaBtn', 'oceaniaBtn'].forEach(id => {
        document.getElementById(id).classList.toggle('active', id === activeId);
      });
    }
    
    // ======== INITIALIZE ========
    loadDestinationData();
  </script>
</body>
</html>
